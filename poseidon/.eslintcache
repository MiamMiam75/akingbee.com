[{"/home/romain/projects/apps/akingbee/poseidon/src/index.js":"1","/home/romain/projects/apps/akingbee/poseidon/src/App.js":"2","/home/romain/projects/apps/akingbee/poseidon/src/services/localization.js":"3","/home/romain/projects/apps/akingbee/poseidon/src/lib/common.js":"4","/home/romain/projects/apps/akingbee/poseidon/src/constants/index.js":"5","/home/romain/projects/apps/akingbee/poseidon/src/pages/index.js":"6","/home/romain/projects/apps/akingbee/poseidon/src/pages/frame.js":"7","/home/romain/projects/apps/akingbee/poseidon/src/pages/login.js":"8","/home/romain/projects/apps/akingbee/poseidon/src/pages/registration.js":"9","/home/romain/projects/apps/akingbee/poseidon/src/pages/generic.js":"10","/home/romain/projects/apps/akingbee/poseidon/src/pages/welcome.js":"11","/home/romain/projects/apps/akingbee/poseidon/src/pages/setup.js":"12","/home/romain/projects/apps/akingbee/poseidon/src/pages/manage/apiary.js":"13","/home/romain/projects/apps/akingbee/poseidon/src/pages/manage/hives.js":"14","/home/romain/projects/apps/akingbee/poseidon/src/services/authentication.js":"15","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/setup.js":"16","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/apiary.js":"17","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/swarm.js":"18","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/comments.js":"19","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/hive.js":"20","/home/romain/projects/apps/akingbee/poseidon/src/components/index.js":"21","/home/romain/projects/apps/akingbee/poseidon/src/components/appHeaders.js":"22","/home/romain/projects/apps/akingbee/poseidon/src/components/appSideMenu.js":"23","/home/romain/projects/apps/akingbee/poseidon/src/components/modal.js":"24","/home/romain/projects/apps/akingbee/poseidon/src/components/formUtils.js":"25","/home/romain/projects/apps/akingbee/poseidon/src/components/richEditor.js":"26"},{"size":197,"mtime":1599164433783,"results":"27","hashOfConfig":"28"},{"size":4298,"mtime":1612049474486,"results":"29","hashOfConfig":"28"},{"size":867,"mtime":1612049596793,"results":"30","hashOfConfig":"28"},{"size":1678,"mtime":1611997591983,"results":"31","hashOfConfig":"28"},{"size":1712,"mtime":1609888636667,"results":"32","hashOfConfig":"28"},{"size":400,"mtime":1611177298420,"results":"33","hashOfConfig":"28"},{"size":1621,"mtime":1610833835257,"results":"34","hashOfConfig":"28"},{"size":940,"mtime":1611957545843,"results":"35","hashOfConfig":"28"},{"size":1359,"mtime":1604852480552,"results":"36","hashOfConfig":"28"},{"size":598,"mtime":1611177298417,"results":"37","hashOfConfig":"28"},{"size":159,"mtime":1600618492055,"results":"38","hashOfConfig":"28"},{"size":5524,"mtime":1612113462380,"results":"39","hashOfConfig":"28"},{"size":8041,"mtime":1611218267477,"results":"40","hashOfConfig":"28"},{"size":20389,"mtime":1612307252170,"results":"41","hashOfConfig":"28"},{"size":1609,"mtime":1611957570063,"results":"42","hashOfConfig":"28"},{"size":677,"mtime":1611217907223,"results":"43","hashOfConfig":"28"},{"size":719,"mtime":1611216276873,"results":"44","hashOfConfig":"28"},{"size":358,"mtime":1611499260447,"results":"45","hashOfConfig":"28"},{"size":235,"mtime":1612307252170,"results":"46","hashOfConfig":"28"},{"size":1398,"mtime":1611499289357,"results":"47","hashOfConfig":"28"},{"size":285,"mtime":1612106059993,"results":"48","hashOfConfig":"28"},{"size":2162,"mtime":1604184625969,"results":"49","hashOfConfig":"28"},{"size":3586,"mtime":1611177298400,"results":"50","hashOfConfig":"28"},{"size":1701,"mtime":1612113576473,"results":"51","hashOfConfig":"28"},{"size":2640,"mtime":1611524318137,"results":"52","hashOfConfig":"28"},{"size":1244,"mtime":1612307252170,"results":"53","hashOfConfig":"28"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},"wytl8d",{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"56"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"56"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"56"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"56"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"85","usedDeprecatedRules":"56"},{"filePath":"86","messages":"87","errorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"88","usedDeprecatedRules":"56"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"91","usedDeprecatedRules":"56"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"94","usedDeprecatedRules":"56"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"56"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"56"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"103","usedDeprecatedRules":"56"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"106","usedDeprecatedRules":"56"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"56"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"113","usedDeprecatedRules":"56"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"56"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"119","usedDeprecatedRules":"56"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/romain/projects/apps/akingbee/poseidon/src/index.js",[],["122","123"],"/home/romain/projects/apps/akingbee/poseidon/src/App.js",[],"/home/romain/projects/apps/akingbee/poseidon/src/services/localization.js",["124"],"/* global i18n */\nimport 'moment/locale/fr';\n\nimport enUS from 'antd/lib/locale/en_US';\nimport frFR from 'antd/lib/locale/fr_FR';\n\nimport fr from '../locales/french.json';\nimport en from '../locales/english.json';\n\nimport { setCookie, getCookie } from '../lib/common.js';\n\nconst languages = { en, fr };\nconst locales = { en: enUS, fr: frFR };\n\nwindow.i18n = (key) => window.i18nData[key];\n\nwindow.changeLanguage = (lang) => {\n  if (lang in languages) {\n    window.i18nData = languages[lang];\n    window.currentLanguage = lang;\n    window.locale = locales[lang];\n    setCookie('language', lang, {expires: 'Fri, 31 Dec 2100 23:59:59 GMT'});\n  }\n}\n\nconst getDefaultLanguage = () => {\n  const defaultLang = getCookie('language') || window.navigator.language;\n  let lang = defaultLang === 'fr' ? 'fr' : 'en';\n  return lang;\n}\n\nwindow.changeLanguage(getDefaultLanguage());\n","/home/romain/projects/apps/akingbee/poseidon/src/lib/common.js",["125","126"],"import { notification } from 'antd';\nimport { navigate } from '@reach/router';\nimport axios from 'axios';\n\nimport { NotFound } from '../pages'\n\nexport function getCookie(name, cookies) {\n  if (!cookies) {\n    cookies = document.cookie;\n  }\n  cookies = document.cookie.split(\";\");\n  let value = null;\n  cookies.forEach((cookie) => {\n    const data = cookie.split(\"=\");\n    if (data[0].trim() === name) {\n      value = data[1].trim();\n      return;\n    }\n  })\n  return value;\n}\n\nexport function setCookie(key, value, conf) {\n  let cookie = `${key}=${value};`\n  let cookieConf = {path: '/', samesite: 'strict'}\n  Object.assign(cookieConf, conf)\n  cookie += Object.keys(cookieConf).map((key) => {\n    return [key, cookieConf[key]].join(\"=\")\n  }).join(\";\");\n  document.cookie = cookie\n}\n\nexport function notificate(type, description) {\n  notification[type]({\n    message: description,\n  });\n}\n\naxios.defaults.headers.common[\"Content-Type\"] = \"application/json\"\n\nexport const cerbesApi = axios.create({\n  baseURL: 'http://localhost:9001',\n  withCredentials: true,\n})\n\nexport const aristaeusApi = axios.create({\n  baseURL: 'http://localhost:9002',\n  withCredentials: true,\n})\n\nexport function dealWithError(error) {\n  const response = error.response;\n\n  if (!response) {\n    notificate(\"error\", error.message);\n    return;\n  }\n\n  if (response.status === 401 && window.location.pathname != \"/login\") {\n    navigate(\"/login\");\n    return;\n  }\n\n  let msg;\n  if (response.status === 422) {\n    console.log(response)\n    msg = response.data.detail.map(e => {\n      return `${e.loc[1]}: ${e.msg}`\n    }).join(\", \")\n  } else {\n    msg = response.data.detail;\n  }\n\n  notificate(\"error\", msg)\n}","/home/romain/projects/apps/akingbee/poseidon/src/constants/index.js",[],"/home/romain/projects/apps/akingbee/poseidon/src/pages/index.js",[],"/home/romain/projects/apps/akingbee/poseidon/src/pages/frame.js",["127"],"import React from 'react';\nimport { Layout, Affix } from 'antd';\nimport { Redirect } from '@reach/router';\n\nimport { LoggedInMenu, LoggedOutMenu, ManageSideMenu, SetupSideMenu } from '../components';\nimport { isLogged } from '../services/authentication';\n\nconst { Header, Content, Footer } = Layout;\n\n\nclass Frame extends React.Component {\n  render() {\n\n    const section = this.props.path.split(\"/\")[1];\n\n    const MainMenu = this.props.isLoggedIn ? LoggedInMenu : LoggedOutMenu;\n\n    let SideMenu = () => \"\";\n\n    if (section === \"manage\") {\n      SideMenu = ManageSideMenu;\n    } else if (section === \"setup\") {\n      SideMenu = SetupSideMenu;\n    }\n\n    return (\n      <Layout style={{ 'min-height': '100vh' }}>\n        <Affix offsetTop='0'>\n          <Header className=\"header\">\n            <div className=\"logo\" />\n            <MainMenu section={section} languageCallback={this.props.languageCallback}/>\n          </Header>\n        </Affix>\n        <Content style={{ padding: '0 50px'}}>\n          <Layout className=\"site-layout-background\" style={{ padding: '24px 0', 'min-height': '93vh'}}>\n            <SideMenu submenuTopic={this.props.submenuTopic} submenuItem={this.props.submenuItem} />\n            <Content>\n              {this.props.children}\n            </Content>\n          </Layout>\n        </Content>\n      </Layout>\n    )\n  };\n}\n\nexport function PrivateFrame(props) {\n  const logged = isLogged();\n  if (!logged) {\n    return <Redirect to=\"/login\" noThrow />\n  }\n  return <Frame {...props} isLoggedIn={true} />\n}\n\nexport function PublicFrame(props) {\n  return <Frame {...props} isLoggedIn={false} />\n}\n","/home/romain/projects/apps/akingbee/poseidon/src/pages/login.js",[],"/home/romain/projects/apps/akingbee/poseidon/src/pages/registration.js",[],"/home/romain/projects/apps/akingbee/poseidon/src/pages/generic.js",[],"/home/romain/projects/apps/akingbee/poseidon/src/pages/welcome.js",[],"/home/romain/projects/apps/akingbee/poseidon/src/pages/setup.js",["128","129"],"import React from 'react';\n\nimport { Row, Col, Table, Space, Button, Form, Input, Popconfirm } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons'\n\nimport { FormButtonModal, FormLinkModal } from '../components';\nimport { dealWithError, notificate } from '../lib/common';\nimport { getSetupData, postSetupData, updateSetupData, deleteSetupData } from '../services/aristaeus/setup';\nimport { ERROR_STATUS, LOADING_STATUS, getGenericPage } from './generic';\n\n\nfunction onFailed(err) {\n  notificate(\"error\", \"Failed\")\n}\n\nexport function AddNewDataForm(props) {\n  const [form] = Form.useForm();\n\n  form.setFieldsValue({\n    \"dataType\": props.dataType,\n  })\n\n  return (\n    <Form id=\"addNewDataFormId\" form={form} name=\"basic\" onFinish={props.onFinish} onFinishFailed={onFailed}>\n      <Form.Item label={window.i18n(\"form.newEntry\")} name=\"newEntry\">\n        <Input />\n      </Form.Item>\n      <Form.Item name=\"dataType\" hidden={true}/>\n    </Form>\n  )\n}\n\nexport function UpdateDataForm(props) {\n  const [form] = Form.useForm();\n\n  form.setFieldsValue({\n    \"dataType\": props.dataType,\n    \"oldValue\": props.currentValue,\n    \"objectId\": props.objectId,\n  })\n\n  return (\n    <Form id=\"updateDataFormId\" form={form} name=\"basic\" onFinish={props.onFinish} onFinishFailed={onFailed}>\n      <Form.Item label={window.i18n(\"form.updateEntry\")} name=\"updateEntry\">\n        <Input defaultValue={props.currentValue} />\n      </Form.Item>\n      <Form.Item name=\"dataType\" hidden={true} />\n      <Form.Item name=\"oldValue\" hidden={true} />\n      <Form.Item name=\"objectId\" hidden={true} />\n    </Form>\n  )\n}\n\n\nexport class SetupPage extends React.Component {\n  state = {tableData: [], pageStatus: LOADING_STATUS}\n\n  getTableData = (data) => {\n    const tableData = data.reduce((acc, val, index) => {\n      acc.push({\n        key: index+1,\n        id: val.id,\n        name: val.name,\n      });\n      return acc;\n    }, []);\n    return tableData;\n  }\n\n  async componentDidMount() {\n    try {\n      let data = await getSetupData(this.props.dataType);\n      let tableData = this.getTableData(data);\n      let pageStatus = 'OK';\n\n      this.setState({tableData, pageStatus});\n    } catch (error) {\n      dealWithError(error);\n      this.setState((state) => {\n        state['pageStatus'] = ERROR_STATUS;\n        return state;\n      })\n    }\n  }\n\n  postData = async(form) => {\n    const value = form.newEntry;\n\n    if (!value) {\n      notificate('error', window.i18n('error.incorrectEntry'))\n      return;\n    }\n\n    try {\n      await postSetupData(this.props.dataType, value);\n      let data = await getSetupData(this.props.dataType);\n      let tableData = this.getTableData(data);\n      this.setState((state) => {\n        state['tableData'] = tableData;\n        return state;\n      });\n    } catch (error) {\n      dealWithError(error);\n    }\n  }\n\n  updateData = async(form) => {\n    const objectId = form.objectId;\n    const newValue = form.updateEntry;\n    const oldValue = form.oldValue;\n\n    if (newValue === undefined || newValue === oldValue) {\n      notificate('error', window.i18n('error.sameEntry'))\n      return;\n    }\n\n    if (!newValue) {\n      notificate('error', window.i18n('error.incorrectEntry'))\n      return;\n    }\n\n    try {\n      await updateSetupData(this.props.dataType, newValue, objectId);\n      let data = await getSetupData(this.props.dataType);\n      let tableData = this.getTableData(data);\n      this.setState((state) => {\n        state['tableData'] = tableData;\n        return state;\n      });\n    } catch (error) {\n      dealWithError(error);\n    }\n  }\n\n  deleteData = async(objectId) => {\n    try {\n      await deleteSetupData(this.props.dataType, objectId);\n      let data = await getSetupData(this.props.dataType);\n      let tableData = this.getTableData(data);\n      this.setState((state) => {\n        state['tableData'] = tableData;\n        return state;\n      });\n    } catch (error) {\n      dealWithError(error);\n    }\n  }\n\n  render() {\n    let genericPage = getGenericPage(this.state.pageStatus);\n    if (genericPage) { return genericPage };\n\n    const columns = [\n      {\n        title: window.i18n(`title.${this.props.dataType}`),\n        dataIndex: 'name',\n        key: 'name',\n        defaultSortOrder: 'ascend',\n        sorter: (a, b) => a.name.localeCompare(b.name),\n      },\n      {\n        title: window.i18n('word.actions'),\n        key: 'action',\n        render: (text, record) => (\n          <Space size='middle'>\n            <FormLinkModal title={window.i18n('title.updateEntry')} formId='updateDataFormId' linkContent={window.i18n('word.edit')}>\n              <UpdateDataForm objectId={record.id} currentValue={record.name} dataType={this.props.dataType} onFinish={this.updateData} />\n            </FormLinkModal>\n            <Popconfirm onConfirm={() => this.deleteData(record.id)} title={window.i18n(\"confirm.deleteData\")}>\n              <a href='#'>{window.i18n('word.delete')}</a>\n            </Popconfirm>\n          </Space>\n        )\n      }\n    ];\n\n    return (\n      <>\n        <Row>\n          <Col offset={2}>\n            <Table dataSource={this.state.tableData} columns={columns} pagination={false} bordered />\n          </Col>\n          <Col style={{ paddingLeft: '20px'}}>\n            <FormButtonModal title={window.i18n(\"title.addNewEntry\")} formId='addNewDataFormId' buttonIcon={<PlusOutlined />}>\n              <AddNewDataForm dataType={this.props.dataType} onFinish={this.postData} />\n            </FormButtonModal>\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}","/home/romain/projects/apps/akingbee/poseidon/src/pages/manage/apiary.js",["130","131","132","133"],"import React from 'react';\n\nimport { Row, Col, Table, Space, Button, Form, Input, Popconfirm, Select, Divider } from 'antd';\nimport { PlusOutlined } from '@ant-design/icons'\nimport { navigate } from '@reach/router';\n\nimport { FormButtonModal, FormLinkModal } from '../../components';\nimport { dealWithError, notificate } from '../../lib/common';\nimport { formItemLayout, tailFormItemLayout } from '../../constants';\n\nimport { getSetupData } from '../../services/aristaeus/setup';\nimport { createApiary, getApiaries, updateApiary, deleteApiary } from '../../services/aristaeus/apiary';\nimport { NOT_FOUND_STATUS, ERROR_STATUS, LOADING_STATUS, getGenericPage } from '../generic';\n\n\nfunction onFailed(err) {\n  notificate(\"error\", \"Failed\")\n}\n\nexport function UpdateApiaryForm(props) {\n  const [form] = Form.useForm();\n\n  form.setFieldsValue({\n    \"apiaryId\": props.apiaryId,\n    \"name\": props.record.name,\n    \"location\": props.record.location,\n    \"honey_type\": props.record.honeyTypeId,\n  })\n\n  return (\n    <Form {... formItemLayout} id=\"updateApiaryFormId\" form={form} name=\"basic\" onFinish={props.onFinish} onFinishFailed={onFailed}>\n      <Form.Item label={window.i18n(\"word.name\")} name=\"name\" rules={[{type: 'string', min: 1, message: window.i18n('form.insertApiaryName')}]}>\n        <Input defaultValue={props.record.name} />\n      </Form.Item>\n      <Form.Item label={window.i18n(\"word.location\")} name=\"location\" rules={[{type: 'string', min: 1, message: window.i18n('form.insertApiaryLocation')}]}>\n        <Input defaultValue={props.record.location} />\n      </Form.Item>\n      <Form.Item label={window.i18n(\"word.honeyType\")} name=\"honey_type\" rules={[{message: window.i18n('form.insertApiaryHoneyType')}]}>\n        <Select defaultValue={props.record.honeyTypeId}>\n          {\n            props.honey_types.map(data => {\n              return (\n                <Select.Option key={data.id}>{data.name}</Select.Option>\n              )\n            })\n          }\n        </Select>\n      </Form.Item>\n      <Form.Item name=\"apiaryId\" hidden={true} />\n    </Form>\n  )\n}\n\n\nexport class ApiaryPage extends React.Component {\n  state = {tableData: [], apiaryHoneyType: [], pageStatus: LOADING_STATUS}\n\n  getTableContent = (data) => {\n    const tableData = data.reduce((acc, val, index) => {\n        acc.push({\n          key: index+1,\n          id: val.id,\n          name: val.name,\n          location: val.location,\n          honeyType: val.honey_type.name,\n          honeyTypeId: val.honey_type.id,\n          nb_hives: val.nb_hives,\n        });\n        return acc;\n      }, []);\n\n    return tableData;\n  }\n\n  async componentDidMount() {\n    try {\n      let apiaries = await getApiaries();\n      let apiaryHoneyType = await getSetupData('apiary_honey_type');\n      let tableData = this.getTableContent(apiaries);\n      let pageStatus = 'OK';\n\n      this.setState({tableData, apiaryHoneyType, pageStatus})\n\n    } catch (error) {\n      dealWithError(error);\n      this.setState((state) => {\n        state['pageStatus'] = ERROR_STATUS;\n      })\n    }\n  }\n\n  deleteData = async(apiaryId) => {\n    try {\n      await deleteApiary(apiaryId);\n      let apiaries = await getApiaries();\n      let tableData = this.getTableContent(apiaries);\n\n      this.setState((state) => {\n        state['apiaries'] = apiaries;\n        state['tableData'] = tableData;\n        return state;\n      })\n    } catch (error) {\n      dealWithError(error);\n    }\n  }\n\n  updateData = async(form) => {\n    const apiaryId = form.apiaryId\n    const data = {\n      name: form.name,\n      location: form.location,\n      honey_type_id: form.honey_type\n    }\n\n    try {\n      await updateApiary(apiaryId, data);\n      let apiaries = await getApiaries();\n      let tableData = this.getTableContent(apiaries);\n\n      this.setState((state) => {\n        state['apiaries'] = apiaries;\n        state['tableData'] = tableData;\n        return state;\n      })\n    } catch (error) {\n      dealWithError(error);\n    }\n  }\n\n  render() {\n    let genericPage = getGenericPage(this.state.pageStatus);\n    if (genericPage) { return genericPage };\n\n    const columns = [\n      {\n        title: window.i18n('word.name'),\n        dataIndex: 'name',\n        key: 'name',\n        defaultSortOrder: 'ascend',\n        sorter: (a, b) => a.name.localeCompare(b.name),\n      },\n      {\n        title: window.i18n('word.location'),\n        dataIndex: 'location',\n        key: 'location',\n      },\n      {\n        title: window.i18n('word.hives'),\n        dataIndex: 'nb_hives',\n        key: 'nb_hives',\n      },\n      {\n        title: window.i18n('word.honeyType'),\n        dataIndex: 'honeyType',\n        key: 'honeyType',\n      },\n      {\n        title: window.i18n('word.actions'),\n        key: 'action',\n        render: (text, record) => (\n          <Space size='middle'>\n            <FormLinkModal title={window.i18n('title.apiaryUpdate')} formId='updateApiaryFormId' linkContent={window.i18n('word.edit')}>\n              <UpdateApiaryForm apiaryId={record.id} record={record} honey_types={this.state.apiaryHoneyType} onFinish={this.updateData} />\n            </FormLinkModal>\n            <Popconfirm onConfirm={() => this.deleteData(record.id)} title={window.i18n(\"confirm.deleteApiary\")}>\n              <a href='#'>{window.i18n('word.delete')}</a>\n            </Popconfirm>\n          </Space>\n        )\n      }\n    ]\n\n    return (\n      <>\n        <Row>\n          <Col span={23} offset={1}>\n            <Table dataSource={this.state.tableData} columns={columns} pagination={false} bordered />\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}\n\n\n\nexport class ApiaryCreationPage extends React.Component {\n  state = {\n    pageStatus: LOADING_STATUS,\n    apiaryHoneyType: []\n  }\n\n  async componentDidMount() {\n    try {\n      let apiaryHoneyType = await getSetupData('apiary_honey_type');\n      let pageStatus = 'OK';\n\n      this.setState({apiaryHoneyType, pageStatus})\n    } catch (error) {\n      dealWithError(error);\n      this.setState((state) => {\n        state['pageStatus'] = ERROR_STATUS;\n        return state;\n      })\n    }\n  }\n\n  async postData(data) {\n    try {\n      await createApiary(data);\n      navigate('/manage/apiary');\n    } catch (error) {\n      dealWithError(error);\n    }\n  }\n\n  render() {\n    let genericPage = getGenericPage(this.state.pageStatus);\n    if (genericPage) { return genericPage };\n\n    return (\n      <>\n        <Row>\n          <Col offset={1}>\n            <h1>{window.i18n('title.apiaryCreation')}</h1>\n          </Col>\n        </Row>\n        <Row>\n          <Col offset={1} span={23}>\n            <Divider style={{paddingLeft: '20px'}} plain/>\n            <br/>\n          </Col>\n        </Row>\n        <Row>\n          <Col span={8}>\n            <Form {...formItemLayout} onFinish={this.postData} requiredMark={false}>\n              <Form.Item label={window.i18n(\"word.name\")} name=\"name\" rules={[{required: true, message: window.i18n('form.insertApiaryName')}]}>\n                <Input />\n              </Form.Item>\n              <Form.Item label={window.i18n(\"word.location\")} name=\"location\" rules={[{required: true, message: window.i18n('form.insertApiaryLocation')}]}>\n                <Input />\n              </Form.Item>\n              <Form.Item label={window.i18n(\"word.honeyType\")} name=\"honey_type\" rules={[{required: true, message: window.i18n('form.selectApiaryHoneyType')}]}>\n                <Select defaultValue={window.i18n('form.selectAValue')}>\n                  {\n                    this.state['apiaryHoneyType'].map(data => {\n                      return (\n                        <Select.Option key={data.id}>{data.name}</Select.Option>\n                      )\n                    })\n                  }\n                </Select>\n              </Form.Item>\n              <Form.Item {... tailFormItemLayout}>\n                <Button type=\"primary\" htmlType=\"submit\">\n                  {window.i18n('word.submit')}\n                </Button>\n              </Form.Item>\n            </Form>\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}","/home/romain/projects/apps/akingbee/poseidon/src/pages/manage/hives.js",["134"],"import React from 'react';\n\nimport { Row, Col, Table, Space, Button, Form, Input, Popconfirm, Select, Divider, Card, Tabs, DatePicker } from 'antd';\nimport { navigate, Link } from '@reach/router';\n\nimport { OptionalFormItem, FormLinkModal, FormButtonModal, CascaderForm, RichEditor } from '../../components';\nimport { dealWithError, notificate } from '../../lib/common';\nimport { formItemLayout, tailFormItemLayout } from '../../constants';\n\nimport { getSetupData } from '../../services/aristaeus/setup';\nimport { getApiaries } from '../../services/aristaeus/apiary';\nimport { getCommentsByHive } from '../../services/aristaeus/comments';\nimport { createHive, getHives, updateHive, deleteHive, getHive, moveHive } from '../../services/aristaeus/hive';\nimport { deleteSwarm, createSwarm } from '../../services/aristaeus/swarm';\n\nimport { NOT_FOUND_STATUS, ERROR_STATUS, LOADING_STATUS, getGenericPage } from '../generic';\n\nimport '../styles.css';\nimport { PlusOutlined, PlusCircleOutlined } from '@ant-design/icons';\n\nfunction onFailed(err) {\n  notificate(\"error\", \"Failed\")\n}\n\nexport function UpdateHiveForm(props) {\n  const [form] = Form.useForm();\n\n  form.setFieldsValue({\n    \"hiveId\": props.hive.id,\n    \"name\": props.hive.name,\n    \"owner\": props.hive.owner.id,\n    \"condition\": props.hive.condition.id,\n  })\n\n  return (\n    <Form {... formItemLayout} id=\"updateHiveFormId\" form={form} name=\"basic\" onFinish={props.onFinish} onFailed={onFailed}>\n      <Form.Item label={window.i18n(\"word.name\")} name=\"name\" rules={[{type: 'string', min: 1, message: window.i18n('form.insertHiveName')}]}>\n        <Input defaultValue={props.hive.name} />\n      </Form.Item>\n      <Form.Item label={window.i18n(\"word.owner\")} name=\"owner\" rules={[{message: window.i18n('form.selectHiveOwner')}]}>\n        <Select defaultValue={props.hive.owner.id}>\n          {\n            props.owners.map(data => {\n              return (\n                <Select.Option key={data.id}>{data.name}</Select.Option>\n              )\n            })\n          }\n        </Select>\n      </Form.Item>\n      <Form.Item label={window.i18n(\"word.condition\")} name=\"condition\" rules={[{message: window.i18n('form.selectHiveCondition')}]}>\n        <Select defaultValue={props.hive.condition.id}>\n          {\n            props.conditions.map(data => {\n              return (\n                <Select.Option key={data.id}>{data.name}</Select.Option>\n              )\n            })\n          }\n        </Select>\n      </Form.Item>\n      <Form.Item name=\"hiveId\" hidden={true} />\n    </Form>\n  )\n}\n\nfunction CreateHiveForm(props) {\n  return (\n    <Form {...formItemLayout} onFinish={props.callback} onFailed={onFailed} requiredMark={false}>\n      <Form.Item label={window.i18n(\"word.name\")} name=\"name\" rules={[{required: true, message: window.i18n('form.insertHiveName')}]}>\n        <Input />\n      </Form.Item>\n      <Form.Item label={window.i18n(\"word.owner\")} name=\"owner_id\" rules={[{required: true, message: window.i18n('form.insertHiveOwner')}]}>\n        <Select defaultValue={window.i18n('form.selectAValue')}>\n          {\n            props.beekeepers.map(data => {\n              return (\n                <Select.Option key={data.id}>{data.name}</Select.Option>\n              )\n            })\n          }\n        </Select>\n      </Form.Item>\n      <Form.Item label={window.i18n(\"word.condition\")} name=\"condition_id\" rules={[{required: true, message: window.i18n('form.selectHiveCondition')}]}>\n        <Select defaultValue={window.i18n('form.selectAValue')}>\n          {\n            props.conditions.map(data => {\n              return (\n                <Select.Option key={data.id}>{data.name}</Select.Option>\n              )\n            })\n          }\n        </Select>\n      </Form.Item>\n      <OptionalFormItem buttonName={window.i18n(\"form.addToApiary\")} label={window.i18n(\"word.apiary\")} name=\"apiary_id\" rules={[{required: true, message: window.i18n('form.selectHiveApiary')}]}>\n        <Select defaultValue={window.i18n('form.selectAValue')}>\n          {\n            props.apiaries.map(data => {\n              return (\n                <Select.Option key={data.id}>{data.name}</Select.Option>\n              )\n            })\n          }\n        </Select>\n      </OptionalFormItem>\n      <OptionalFormItem buttonName={window.i18n(\"form.addSwarm\")} label={window.i18n(\"word.swarmHealth\")} name=\"swarm_health_id\" rules={[{required: true, message: window.i18n('form.selectSwarmHealth')}]}>\n        <Select defaultValue={window.i18n('form.selectAValue')}>\n          {\n            props.swarmHealths.map(data => {\n              return (\n                <Select.Option key={data.id}>{data.name}</Select.Option>\n              )\n            })\n          }\n        </Select>\n      </OptionalFormItem>\n      <Form.Item {...tailFormItemLayout}>\n        <Button type=\"primary\" htmlType=\"submit\">\n          {window.i18n('word.submit')}\n        </Button>\n      </Form.Item>\n    </Form>\n  )\n}\n\nfunction CreateComment(props) {\n  const [form] = Form.useForm();\n  const [comment, setComment] = React.useState(\"\");\n\n  const onChange = (data) => {\n    setComment(data.blocks[0].text)\n    form.setFieldsValue({ comment })\n  }\n\n  return (\n    <Form id=\"newComment\" form={form} layout=\"vertical\" requiredMark={false} onFinish={props.onFinish} onFailed={onFailed}>\n      <Form.Item label={window.i18n(\"word.date\")} name=\"date\">\n        <DatePicker />\n      </Form.Item>\n      <Form.Item label={window.i18n(\"word.comment\")} name=\"comment\" valuePropName=\"comment\">\n        <RichEditor onChange={onChange} />\n      </Form.Item>\n    </Form>\n  )\n}\n\n\nexport class HivePage extends React.Component {\n  state = {tableData: [], hiveBeekeeper: [], hiveCondition: [], pageStatus: LOADING_STATUS}\n\n  getTableData = (data) => {\n    return data.reduce((acc, val, index) => {\n      acc.push({\n        key: index+1,\n        id: val.id,\n        name: val.name,\n        owner: val.owner,\n        condition: val.condition,\n        swarm: val.swarm,\n        apiary: val.apiary,\n      });\n      return acc;\n    }, []);\n  }\n\n  async componentDidMount() {\n    try {\n      let hives = await getHives();\n      let hiveBeekeeper = await getSetupData('hive_beekeeper');\n      let hiveCondition = await getSetupData('hive_condition');\n      let tableData = this.getTableData(hives);\n      let pageStatus = 'OK';\n\n      this.setState({hives, hiveBeekeeper, hiveCondition, pageStatus, tableData});\n\n    } catch (error) {\n      dealWithError(error);\n      this.setState((state) => {\n        state['pageStatus'] = ERROR_STATUS;\n      })\n    }\n  }\n\n  deleteData = async(hiveId) => {\n    try {\n      await deleteHive(hiveId);\n      let hives = await getHives();\n      let tableData = this.getTableData(hives);\n\n      this.setState((state) => {\n        state['hives'] = hives;\n        state['tableData'] = tableData;\n        return state;\n      })\n    } catch (error) {\n      dealWithError(error);\n      return\n    };\n\n\n  }\n\n  updateData = async(form) => {\n    const hiveId = form.hiveId;\n    const data = {\n      name: form.name,\n      owner_id: form.owner,\n      condition_id: form.condition\n    }\n\n    try {\n      await updateHive(hiveId, data);\n\n      let hives = await getHives();\n      let tableData = this.getTableData(hives);\n      this.setState((state) => {\n        state['hives'] = hives;\n        state['tableData'] = tableData;\n        return state;\n      })\n    } catch (error) {\n      dealWithError(error);\n    }\n  }\n\n  render() {\n    let genericPage = getGenericPage(this.state.pageStatus);\n    if (genericPage) { return genericPage };\n\n    const columns = [\n      {\n        title: window.i18n('word.name'),\n        dataIndex: 'name',\n        key: 'name',\n        defaultSortOrder: 'ascend',\n        sorter: (a, b) => a.name.localeCompare(b.name),\n        render: (text, record) => {\n          let url = `${window.location.pathname}/${record.id}`\n          return <Link to={url}>{text}</Link>;\n        }\n      },\n      {\n        title: window.i18n('word.owner'),\n        dataIndex: ['owner', 'name'],\n      },\n      {\n        title: window.i18n('word.condition'),\n        dataIndex: ['condition', 'name']\n      },\n      {\n        title: window.i18n('word.swarmHealth'),\n        dataIndex: ['swarm', 'health', 'name']\n      },\n      {\n        title: window.i18n('word.apiary'),\n        dataIndex: ['apiary', 'name']\n      },\n      {\n        title: window.i18n('word.actions'),\n        key: 'action',\n        render: (text, record) => (\n          <Space size='middle'>\n            <FormLinkModal title={window.i18n('title.hiveUpdate')} formId='updateHiveFormId' linkContent={window.i18n('word.edit')}>\n              <UpdateHiveForm hive={record} owners={this.state.hiveBeekeeper} conditions={this.state.hiveCondition} onFinish={this.updateData} />\n            </FormLinkModal>\n            <Popconfirm onConfirm={() => this.deleteData(record.id)} title={window.i18n(\"confirm.deleteHive\")}>\n              <a href='#'>{window.i18n('word.delete')}</a>\n            </Popconfirm>\n          </Space>\n        )\n      }\n    ]\n\n    return (\n      <>\n        <Row>\n          <Col span={23} offset={1}>\n            <Table dataSource={this.state.tableData} columns={columns} pagination={false} bordered />\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}\n\n\n\nexport class HiveCreationPage extends React.Component {\n  state = {\n    pageStatus: LOADING_STATUS,\n    hiveBeekeeper: [],\n    hiveCondition: [],\n    apiaries: [],\n    swarmHealthStatus: [],\n  }\n\n  async componentDidMount() {\n    try {\n      let hiveBeekeeper = await getSetupData('hive_beekeeper');\n      let hiveCondition = await getSetupData('hive_condition');\n      let swarmHealthStatus = await getSetupData('swarm_health_status');\n      let apiaries = await getApiaries();\n      let pageStatus = \"OK\";\n\n      this.setState({apiaries, hiveBeekeeper, hiveCondition, swarmHealthStatus, pageStatus});\n    } catch (error) {\n      dealWithError(error);\n      this.setState((state) => {\n        state['pageStatus'] = ERROR_STATUS;\n      })\n    }\n  }\n\n  async postData(data) {\n    try {\n      await createHive(data);\n      navigate('/manage/hive');\n    } catch (error) {\n      dealWithError(error);\n    }\n  }\n\n  render() {\n    let genericPage = getGenericPage(this.state.pageStatus);\n    if (genericPage) { return genericPage };\n\n    return (\n      <>\n        <Row>\n          <Col offset={1}>\n            <h1>{window.i18n('title.hiveCreation')}</h1>\n          </Col>\n        </Row>\n        <Row>\n          <Col offset={1} span={23}>\n            <Divider style={{paddingLeft: '20px'}} plain/>\n            <br/>\n          </Col>\n        </Row>\n        <Row>\n          <Col span={8}>\n            <CreateHiveForm\n              callback={this.postData}\n              beekeepers={this.state['hiveBeekeeper']}\n              conditions={this.state['hiveCondition']}\n              swarmHealths={this.state['swarmHealthStatus']}\n              apiaries={this.state['apiaries']}\n            />\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}\n\nexport class HiveDetailsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      pageStatus: LOADING_STATUS,\n      hive: [],\n      hiveBeekeeper: [],\n      hiveCondition: [],\n      apiaries: [],\n      swarmHealthStatus: [],\n      commentsTableData: [],\n    }\n\n    this.refCascader = React.createRef();\n  }\n\n  updateData = async(form) => {\n    const hiveId = form.hiveId;\n    const data = {\n      name: form.name,\n      owner_id: form.owner,\n      condition_id: form.condition\n    }\n\n    try {\n      await updateHive(hiveId, data);\n\n      let hive = await getHive(hiveId);\n      this.setState((state) => {\n        state['hive'] = hive;\n        return state;\n      })\n    } catch (error) {\n      dealWithError(error);\n    }\n  }\n\n    getCommentsTableData = (data) => {\n    return data.reduce((acc, val, index) => {\n      acc.push({\n        key: index+1,\n        id: val.id,\n        comment: val.comment,\n        date: val.date,\n        type: val.type,\n        event: val.event\n      });\n      return acc;\n    }, []);\n  }\n\n  async componentDidMount() {\n    let hive;\n\n    try {\n      hive = await getHive(this.props.hiveId);\n    } catch (error) {\n      if (error.response.status === 404) {\n        this.setState((state) => {\n          state['pageStatus'] = NOT_FOUND_STATUS;\n          return state;\n        })\n      } else {\n        dealWithError(error);\n      }\n\n      return;\n    }\n\n    try {\n      let apiaries = await getApiaries('apiaries');\n      let hiveBeekeeper = await getSetupData('hive_beekeeper');\n      let hiveCondition = await getSetupData('hive_condition');\n      let swarmHealthStatus = await getSetupData('swarm_health_status');\n      let comments = await getCommentsByHive(this.props.hiveId);\n\n      let commentsTableData = this.getCommentsTableData(comments);\n\n      let pageStatus = \"OK\"\n      this.setState({hive, apiaries, hiveBeekeeper, hiveCondition, swarmHealthStatus, commentsTableData, pageStatus});\n\n    } catch (error) {\n      dealWithError(error);\n      this.setState((state) => {\n        state['pageStatus'] = ERROR_STATUS;\n      });\n      this.forceUpdate();\n    }\n  }\n\n  getCascaderOptions = () => {\n    let options = [];\n\n    let current_apiary = this.state.hive.apiary;\n    let apiaries = this.state.apiaries;\n    let health_statuses = this.state.swarmHealthStatus;\n\n    let apiaryConfig = {\n      label: window.i18n('form.moveHive'),\n      value: \"newApiary\",\n      children: apiaries.reduce((acc, val) => {\n        if (!current_apiary || current_apiary.id != val.id) {\n          acc.push({\n           value: val.id,\n            label: val.name,\n          });\n        }\n        return acc;\n      }, [])\n    };\n\n    if (apiaryConfig.children.length > 0) {\n      options.push(apiaryConfig);\n    }\n\n    if (this.state.hive.swarm) {\n      options.push({\n        label: window.i18n('form.deleteSwarm'),\n        value: \"deleteSwarm\"\n      })\n    } else {\n      options.push({\n        label: window.i18n('form.addSwarm'),\n        value: \"addSwarm\",\n        children: health_statuses.reduce((acc, val) => {\n          acc.push({\n            value: val.id,\n            label: val.name,\n          });\n          return acc;\n        }, [])\n      })\n    }\n\n    options.push({\n      label: window.i18n('form.deleteHive'),\n      value: \"deleteHive\"\n    })\n\n    return options\n  }\n\n  onCascaderSubmit = async({action}) => {\n    this.refCascader.current.reset();\n\n    if (action === undefined) {\n      return;\n    }\n\n    switch (action[0]) {\n      case 'newApiary':\n        let apiary_id = action[1];\n        try {\n          await moveHive(this.state.hive.id, apiary_id);\n          let hive = await getHive(this.state.hive.id)\n          this.setState((state) => {\n            state['hive'] = hive;\n            return state;\n          })\n          notificate('success', window.i18n('form.hiveMovedSuccess'))\n        } catch (error) {\n          dealWithError(error);\n        }\n        break;\n      case 'deleteHive':\n        try {\n          await deleteHive(this.state.hive.id);\n          notificate('success', window.i18n('form.hiveDeletedSuccess'));\n          navigate(\"/manage/hive\");\n        } catch(error) {\n          dealWithError(error);\n        }\n        break;\n      case 'deleteSwarm':\n        try {\n          await deleteSwarm({swarm_id: this.state.hive.swarm.id});\n          let hive = await getHive(this.state.hive.id)\n          this.setState((state) => {\n            state['hive'] = hive;\n            return state;\n          })\n          notificate('success', window.i18n('form.swarmDeletedSuccess'))\n        } catch (error) {\n          dealWithError(error);\n        }\n        break;\n      case 'addSwarm':\n        try {\n          let swarm = await createSwarm({health_status_id: action[1]});\n          await updateHive(this.state.hive.id, {swarm_id: swarm.id})\n          let hive = await getHive(this.state.hive.id)\n          this.setState((state) => {\n            state['hive'] = hive;\n            return state;\n          })\n          notificate('success', window.i18n('form.swarmAddedSuccess'))\n        } catch (error) {\n          dealWithError(error);\n        }\n        break;\n      default:\n        notificate('error', 'Something went wrong with the chosen action - sorry');\n    }\n  }\n\n  getCommentsTableColumn() {\n    return [\n      {\n        title: window.i18n('word.date'),\n        dataIndex: 'date',\n        defaultSortOrder: 'ascend',\n        sorter: (a, b) => a.name.localeCompare(b.name),\n      },\n      {\n        title: window.i18n('word.type'),\n        dataIndex: 'type'\n      },\n      {\n        title: window.i18n('word.comment'),\n        dataIndex: 'comment'\n      },\n      {\n        title: window.i18n('word.actions'),\n        key: 'action',\n        render: (text, record) => (\n          <Space size='middle'>\n            <FormLinkModal title={window.i18n('title.hiveUpdate')} formId='updateHiveFormId' linkContent={window.i18n('word.edit')}>\n              <UpdateHiveForm hive={record} owners={this.state.hiveBeekeeper} conditions={this.state.hiveCondition} onFinish={this.updateData} />\n            </FormLinkModal>\n            <Popconfirm onConfirm={() => this.deleteData(record.id)} title={window.i18n(\"confirm.deleteHive\")}>\n              <a href='#'>{window.i18n('word.delete')}</a>\n            </Popconfirm>\n          </Space>\n        )\n      }\n    ];\n  }\n\n  submitComment = async(data) => {\n    console.log(data);\n    if (!data.date) {\n      notificate('error', window.i18n('error.incorrectEntry'))\n      return;\n    }\n  }\n\n  render() {\n    let genericPage = getGenericPage(this.state.pageStatus);\n    if (genericPage) { return genericPage };\n\n\n    const cardItems = (label, value) => {\n      return <p> {label} : {value}</p>\n    }\n\n    let name = this.state.hive.name;\n    let owner = cardItems(window.i18n('word.owner'), this.state.hive.owner.name);\n    let condition = cardItems(window.i18n('word.condition'), this.state.hive.condition.name);\n\n    let health, apiary;\n    if (this.state.hive.swarm) {\n      health = cardItems(window.i18n('word.health'), this.state.hive.swarm.health.name);\n    }\n    if (this.state.hive.apiary) {\n      apiary = cardItems(window.i18n('word.apiary'), this.state.hive.apiary.name);\n    }\n\n    let updateForm = (\n      <FormLinkModal title={window.i18n('title.hiveUpdate')} formId='updateHiveFormId' linkContent={window.i18n('word.edit')}>\n        <UpdateHiveForm hive={this.state.hive} owners={this.state.hiveBeekeeper} conditions={this.state.hiveCondition} onFinish={this.updateData} />\n      </FormLinkModal>\n    )\n\n    let cascaderOptions = this.getCascaderOptions();\n\n    return (\n      <>\n        <Row>\n          <Col offset=\"1\">\n            <Card title={`${window.i18n(\"word.info\")} ${name}`} size=\"default\" type=\"inner\" extra={<div style={{paddingLeft: '50px'}}>{updateForm}</div>}>\n              {owner}\n              {health}\n              {apiary}\n              {condition}\n            </Card>\n          </Col>\n          <Col style={{paddingLeft: '10px'}}>\n            <CascaderForm ref={this.refCascader} title={window.i18n('form.manageHive')} options={cascaderOptions} onFinish={this.onCascaderSubmit}/>\n          </Col>\n        </Row>\n        <Col offset=\"1\">\n          <Divider/>\n        </Col>\n        <Row>\n          <Col offset=\"1\" span=\"23\">\n            <div className=\"card-container\">\n              <Tabs defaultActiveKey=\"1\" type=\"card\">\n                <Tabs.TabPane tab={window.i18n(\"word.history\")} key=\"1\">\n                  <Row justify=\"end\" style={{marginBottom: '1%'}} >\n                    <Col>\n                      <FormButtonModal buttonIcon={<PlusOutlined style={{ fontSize: '20px'}}/>} title={window.i18n('title.newComment')} formId='newComment'>\n                        <CreateComment onFinish={this.submitComment}/>\n                      </FormButtonModal>\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col span=\"24\">\n                      <Table dataSource={this.state.commentsTableData} columns={this.getCommentsTableColumn()} pagination={false} bordered />\n                    </Col>\n                  </Row>\n                </Tabs.TabPane>\n                <Tabs.TabPane tab={window.i18n(\"word.events\")} key=\"2\">\n                  Events !\n                </Tabs.TabPane>\n              </Tabs>\n            </div>\n          </Col>\n        </Row>\n      </>\n    )\n  }\n}","/home/romain/projects/apps/akingbee/poseidon/src/services/authentication.js",["135"],"import { navigate } from '@reach/router';\nimport { getCookie, dealWithError } from '../lib/common';\nimport { AUTH_COOKIE_NAME } from '../constants';\nimport { cerbesApi, notificate, setCookie } from '../lib/common';\n\nexport function getJWT() {\n  return getCookie(AUTH_COOKIE_NAME);\n}\n\nexport function isLogged() {\n  if (getJWT()) {\n    return true;\n  }\n  return false;\n}\n\nexport function storeJWT(jwt) {\n  setCookie(AUTH_COOKIE_NAME, jwt);\n}\n\nexport function clearJWT() {\n  setCookie(AUTH_COOKIE_NAME, '', {'max-age': 0});\n}\n\nexport function logOff() {\n  clearJWT();\n  navigate(\"/login\")\n}\n\nexport async function registrationRequest({email, username, password, password_bis}) {\n  // checks\n  if (password != password_bis){\n    notificate(\"error\", window.i18n(\"error.passwordsNotIdentical\"))\n    return;\n  }\n  const language = window.currentLanguage;\n\n  // request server to register user\n  const data = {email, username, password, language}\n  await cerbesApi.post(\"/user\", data)\n    .then((response) => {\n      notificate(\"success\", window.i18n(\"success.registrationSuccessful\"))\n      navigate(\"/login\")\n    })\n    .catch((error) => {\n      dealWithError(error);\n    });\n}\n\nexport async function loginRequest({username, password}) {\n  const config = {\n    auth: {username: username, password: password}\n  };\n\n  await cerbesApi.post(\"/login\", null, config)\n    .then((response) => {\n      const token = response.data.access_token;\n      storeJWT(token);\n      notificate(\"success\", window.i18n(\"success.loginSuccessful\"))\n      navigate(\"/\")\n    })\n    .catch((error) => {\n      dealWithError(error);\n    });\n}","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/setup.js",["136","137"],"import { aristaeusApi, dealWithError, notificate } from '../../lib/common';\n\nexport async function getSetupData(type) {\n  let response = await aristaeusApi.get(`/setup/${type}`)\n  return response.data;\n}\n\nexport async function postSetupData(type, value) {\n  let response = await aristaeusApi.post(`/setup/${type}`, {value});\n  return response.data;\n}\n\nexport async function updateSetupData(type, value, objectId) {\n  let response = await aristaeusApi.put(`/setup/${type}/${objectId}`, {value});\n  return response.data;\n}\n\nexport async function deleteSetupData(type, objectId) {\n  let response = await aristaeusApi.delete(`/setup/${type}/${objectId}`);\n  return response.data;\n}","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/apiary.js",["138","139"],"import { aristaeusApi, dealWithError, notificate } from '../../lib/common';\n\nexport async function getApiaries() {\n  let response = await aristaeusApi.get(`/apiary`)\n  return response.data;\n}\n\nexport async function createApiary({name, location, honey_type}) {\n  let response = await aristaeusApi.post(`/apiary`, {name, location, honey_type});\n  return response.data;\n}\n\n\nexport async function updateApiary(apiary_id, {name, location, honey_type_id}) {\n  let response = await aristaeusApi.put(`/apiary/${apiary_id}`, {name, location, honey_type_id});\n  return response.data;\n}\n\n\nexport async function deleteApiary(apiary_id) {\n  let response = await aristaeusApi.delete(`/apiary/${apiary_id}`);\n  return response.data;\n}","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/swarm.js",["140"],"import { aristaeusApi } from '../../lib/common';\n\nexport async function createSwarm({health_status_id}) {\n  let response = await aristaeusApi.post('/swarm', {health_status_id});\n  return response.data;\n}\n\nexport async function deleteSwarm({swarm_id}) {\n  let response = await aristaeusApi.delete(`/swarm/${swarm_id}`);\n  return response.status_code == 204;\n}","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/comments.js",["141"],"import { aristaeusApi } from '../../lib/common';\nimport { createSwarm } from './swarm';\n\nexport async function getCommentsByHive(hive_id) {\n  let response = await aristaeusApi.get(`/comments/hive/${hive_id}`);\n  return response.data;\n}","/home/romain/projects/apps/akingbee/poseidon/src/services/aristaeus/hive.js",["142","143","144"],"import { aristaeusApi } from '../../lib/common';\nimport { createSwarm } from './swarm';\n\nexport async function getHives() {\n  let response = await aristaeusApi.get(`/hive`)\n  return response.data;\n}\n\nexport async function getHive(hiveId) {\n  let response = await aristaeusApi.get(`/hive/${hiveId}`)\n  return response.data;\n}\n\nexport async function createHive({name, condition_id, owner_id, apiary_id, swarm_id, swarm_health_id}) {\n  if (swarm_id === undefined && swarm_health_id !== undefined) {\n    let swarm = createSwarm({health_status_id: swarm_health_id})\n    swarm_id = swarm.id\n  }\n\n  let data = {name, condition_id, owner_id}\n\n  if (apiary_id) {\n    data.apiary_id = apiary_id;\n  }\n  if (swarm_id) {\n    data.swarm_id = swarm_id;\n  }\n\n  let response = await aristaeusApi.post(`/hive`, data)\n  return response.data;\n}\n\n\nexport async function updateHive(hive_id, {name, owner_id, condition_id, swarm_id, apiary_id}) {\n  let response = await aristaeusApi.put(`/hive/${hive_id}`, {name, owner_id, condition_id, swarm_id, apiary_id});\n  return response.status_code == 204;\n}\n\n\nexport async function deleteHive(hive_id) {\n  let response = await aristaeusApi.delete(`/hive/${hive_id}`);\n  return response.status_code == 204;\n}\n\nexport async function moveHive(hive_id, apiary_id) {\n  let response = await aristaeusApi.put(`hive/${hive_id}/move/${apiary_id}`)\n  return response.status_code == 204;\n}","/home/romain/projects/apps/akingbee/poseidon/src/components/index.js",[],"/home/romain/projects/apps/akingbee/poseidon/src/components/appHeaders.js",[],"/home/romain/projects/apps/akingbee/poseidon/src/components/appSideMenu.js",["145","146"],"import React, { Component, useState } from 'react';\nimport Icon from '@ant-design/icons';\nimport { Layout, Menu } from 'antd';\nimport { Link } from '@reach/router';\n\nimport { sections } from '../constants';\n\nimport { ReactComponent as hiveIcon } from '../images/beehouse.svg';\nimport { ReactComponent as apiaryIcon } from '../images/location.svg';\nimport { ReactComponent as swarmIcon } from '../images/bee.svg';\nimport { ReactComponent as eventIcon } from '../images/events.svg';\n\nconst { Sider } = Layout;\nconst { SubMenu } = Menu;\n\nconst hiveMenuIcon = <Icon component={hiveIcon} />;\nconst apiaryMenuIcon = <Icon component={apiaryIcon} />;\nconst swarmMenuIcon = <Icon component={swarmIcon} />;\nconst eventMenuIcon = <Icon component={eventIcon} />;\n\n\nexport function ManageSideMenu(props) {\n\n  return (\n    <Sider className=\"site-layout-background\" width={200}>\n      <Menu\n        mode=\"inline\"\n        defaultOpenKeys={[props.submenuTopic]}\n        selectedKeys={[props.submenuItem]}\n        style={{ height: '100%' }}\n      >\n        <SubMenu key={sections.submenu_hive} icon={hiveMenuIcon} title={window.i18n(\"word.hives\")}>\n          <Menu.Item key={sections.submenu_hive_list}><Link to='/manage/hive'>{window.i18n(\"action.myHives\")}</Link></Menu.Item>\n          <Menu.Item key={sections.submenu_hive_create}><Link to='/manage/hive/create'>{window.i18n(\"action.createHive\")}</Link></Menu.Item>\n        </SubMenu>\n        <SubMenu key={sections.submenu_apiary} icon={apiaryMenuIcon} title={window.i18n(\"word.apiaries\")}>\n          <Menu.Item key={sections.submenu_apiary_list}><Link to='/manage/apiary'>{window.i18n(\"action.myApiaries\")}</Link></Menu.Item>\n          <Menu.Item key={sections.submenu_apiary_create}><Link to='/manage/apiary/create'>{window.i18n(\"action.createApiary\")}</Link></Menu.Item>\n        </SubMenu>\n      </Menu>\n    </Sider>\n  );\n}\n\nexport function SetupSideMenu(props) {\n  return (\n    <Sider className=\"site-layout-background\" width={200}>\n      <Menu\n        mode=\"inline\"\n        style={{ height: '100%' }}\n        defaultOpenKeys={[props.submenuTopic]}\n        selectedKeys={[props.submenuItem]}\n      >\n        <SubMenu key={sections.submenu_setup_swarm} icon={swarmMenuIcon} title={window.i18n(\"action.setupSwarm\")}>\n          <Menu.Item key={sections.submenu_setup_swarm_health}><Link to='/setup/swarm/health'>{window.i18n(\"word.health\")}</Link></Menu.Item>\n        </SubMenu>\n        <SubMenu key={sections.submenu_setup_hive} icon={hiveMenuIcon} title={window.i18n(\"action.setupHive\")}>\n          <Menu.Item key={sections.submenu_setup_hive_beekeeper}><Link to='/setup/hive/beekeeper'>{window.i18n(\"word.beekeepers\")}</Link></Menu.Item>\n          <Menu.Item key={sections.submenu_setup_hive_condition}><Link to='/setup/hive/condition'>{window.i18n(\"word.conditions\")}</Link></Menu.Item>\n        </SubMenu>\n        <SubMenu key={sections.submenu_setup_apiary} icon={apiaryMenuIcon} title={window.i18n(\"action.setupApiary\")}>\n          <Menu.Item key={sections.submenu_setup_apiary_honey_type}><Link to='/setup/apiary/honey_type'>{window.i18n(\"word.honeyTypes\")}</Link></Menu.Item>\n        </SubMenu>\n        <SubMenu key={sections.submenu_setup_event} icon={eventMenuIcon} title={window.i18n(\"action.setupEvent\")}>\n          <Menu.Item key={sections.submenu_setup_event_type}><Link to='/setup/event/type'>{window.i18n(\"word.types\")}</Link></Menu.Item>\n          <Menu.Item key={sections.submenu_setup_event_status}><Link to='/setup/event/status'>{window.i18n(\"word.status\")}</Link></Menu.Item>\n        </SubMenu>\n      </Menu>\n    </Sider>\n  );\n}","/home/romain/projects/apps/akingbee/poseidon/src/components/modal.js",["147","148","149"],"import React from 'react';\nimport { Modal, Button} from 'antd';\nimport { PlusOutlined } from '@ant-design/icons'\nimport Base from 'antd/lib/typography/Base';\n\nclass BaseModal extends React.Component {\n  state = { visible: false}\n\n  showModal = () => {\n    this.setState((state) => ({visible: true}))\n  };\n\n  closeModal = e => {\n    this.setState((state) => ({visible: false}))\n  };\n\n  entrypoint() {\n    return \"\"\n  }\n\n  getFooter() {\n    return (\n      this.props.formId ?\n      [\n        <Button type=\"primary\" onClick={this.closeModal}>{window.i18n(\"word.cancel\")}</Button>,\n        <Button type=\"secondary\" onClick={this.closeModal} form={this.props.formId} htmlType=\"submit\">{window.i18n(\"word.submit\")}</Button>,\n      ]\n      :\n      [\n        <Button type=\"primary\" onClick={this.closeModal}>{window.i18n(\"word.cancel\")}</Button>,\n        <Button type=\"secondary\" onClick={this.closeModal}>{window.i18n(\"word.submit\")}</Button>,\n      ]\n    )\n  }\n\n  render() {\n    return (\n      <>\n        {this.entrypoint()}\n       <Modal\n          title={this.props.title}\n          visible={this.state.visible}\n          onCancel={this.closeModal}\n          onOk={this.closeModal}\n          footer={this.getFooter()}\n          bodyStyle={this.props.modalStyle}\n        >\n          {this.props.children}\n        </Modal>\n      </>\n    );\n  }\n}\n\nexport class FormButtonModal extends BaseModal {\n  entrypoint() {\n    return (\n      <Button icon={this.props.buttonIcon} type=\"default\" shape=\"square\" onClick={this.showModal} />\n    )\n  }\n}\n\nexport class FormLinkModal extends BaseModal {\n  entrypoint() {\n    return (\n      <a onClick={this.showModal}>\n        {this.props.linkContent}\n      </a>\n    )\n  }\n}\n","/home/romain/projects/apps/akingbee/poseidon/src/components/formUtils.js",["150","151"],"import React from 'react';\n\nimport { Button, Form, Space, Row, Col, Cascader } from 'antd';\nimport { PlusOutlined, MinusCircleOutlined, CheckCircleOutlined, CloseCircleOutlined } from '@ant-design/icons'\n\nimport { formItemLayoutWithoutLabel } from '../constants';\n\nexport const formItemLayoutOptional = {\n  labelCol: {\n    xs: { span: 24 },\n    sm: { span: 8 },\n  },\n  wrapperCol: {\n    xs: { span: 20 },\n    sm: { span: 12 },\n  },\n};\n\n\n\nexport class OptionalFormItem extends React.Component {\n  state = {\n    active: false\n  }\n\n  setActive = () => {\n    this.setState((state) => {\n      state.active = true;\n    })\n    this.forceUpdate();\n  }\n\n  setInative = () => {\n    this.setState((state) => {\n      state.active = false;\n    });\n    this.forceUpdate();\n  }\n\n  render() {\n    return (\n      <>\n        {this.state.active === false ?\n          <Form.Item {...formItemLayoutWithoutLabel}>\n            <Button\n              type=\"dashed\"\n              onClick={this.setActive}\n              icon={<PlusOutlined />}\n            >\n              {this.props.buttonName}\n            </Button>\n          </Form.Item>\n        :\n          <Row>\n            <Col span='20'>\n              <Form.Item {...this.props} style={{paddingLeft: '10%'}}>\n                {this.props.children}\n              </Form.Item>\n            </Col>\n            <Col>\n              <MinusCircleOutlined\n              onClick={this.setInative}\n              style={{paddingTop: '70%', paddingLeft: '50%'}}\n              />\n            </Col>\n          </Row>\n        }\n      </>\n    )\n  }\n}\n\n\n\nexport class CascaderForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.refCascader = React.createRef();\n    this.state = {selected: false}\n  }\n\n  reset() {\n    this.refCascader.current.setValue([]);\n  }\n\n  render() {\n    const onChange = (value) => {\n      if (value.length > 0 && !this.state.selected) {\n        this.setState({selected: true})\n      } else if (value.length === 0 && this.state.selected) {\n        this.setState({selected: false})\n      }\n    }\n\n    let buttons;\n    if (this.state.selected) {\n      buttons = (\n        <Form.Item>\n          <Button htmlType='submit' icon={<CheckCircleOutlined/>} type='text' />\n        </Form.Item>\n      )\n    }\n\n    return (\n      <Form {...this.props}>\n        <Row>\n          <Col>\n            <Form.Item name=\"action\">\n              <Cascader ref={this.refCascader} options={this.props.options} onChange={onChange} placeholder={this.props.title}/>\n            </Form.Item>\n          </Col>\n          <Col>\n            {buttons}\n          </Col>\n        </Row>\n      </Form>\n    )\n  }\n}\n","/home/romain/projects/apps/akingbee/poseidon/src/components/richEditor.js",[],{"ruleId":"152","replacedBy":"153"},{"ruleId":"154","replacedBy":"155"},{"ruleId":"156","severity":1,"message":"157","line":1,"column":11,"nodeType":"158","messageId":"159","endLine":1,"endColumn":15},{"ruleId":"156","severity":1,"message":"160","line":5,"column":10,"nodeType":"161","messageId":"159","endLine":5,"endColumn":18},{"ruleId":"162","severity":1,"message":"163","line":59,"column":59,"nodeType":"164","messageId":"165","endLine":59,"endColumn":61},{"ruleId":"156","severity":1,"message":"166","line":8,"column":26,"nodeType":"161","messageId":"159","endLine":8,"endColumn":32},{"ruleId":"156","severity":1,"message":"167","line":3,"column":34,"nodeType":"161","messageId":"159","endLine":3,"endColumn":40},{"ruleId":"168","severity":1,"message":"169","line":170,"column":15,"nodeType":"170","endLine":170,"endColumn":27},{"ruleId":"156","severity":1,"message":"171","line":4,"column":10,"nodeType":"161","messageId":"159","endLine":4,"endColumn":22},{"ruleId":"156","severity":1,"message":"172","line":7,"column":10,"nodeType":"161","messageId":"159","endLine":7,"endColumn":25},{"ruleId":"156","severity":1,"message":"173","line":13,"column":10,"nodeType":"161","messageId":"159","endLine":13,"endColumn":26},{"ruleId":"168","severity":1,"message":"169","line":167,"column":15,"nodeType":"170","endLine":167,"endColumn":27},{"ruleId":null,"fatal":true,"severity":2,"message":"174","line":599,"column":5},{"ruleId":"162","severity":1,"message":"163","line":32,"column":16,"nodeType":"164","messageId":"165","endLine":32,"endColumn":18},{"ruleId":"156","severity":1,"message":"175","line":1,"column":24,"nodeType":"161","messageId":"159","endLine":1,"endColumn":37},{"ruleId":"156","severity":1,"message":"176","line":1,"column":39,"nodeType":"161","messageId":"159","endLine":1,"endColumn":49},{"ruleId":"156","severity":1,"message":"175","line":1,"column":24,"nodeType":"161","messageId":"159","endLine":1,"endColumn":37},{"ruleId":"156","severity":1,"message":"176","line":1,"column":39,"nodeType":"161","messageId":"159","endLine":1,"endColumn":49},{"ruleId":"162","severity":1,"message":"177","line":10,"column":31,"nodeType":"164","messageId":"165","endLine":10,"endColumn":33},{"ruleId":"156","severity":1,"message":"178","line":2,"column":10,"nodeType":"161","messageId":"159","endLine":2,"endColumn":21},{"ruleId":"162","severity":1,"message":"177","line":36,"column":31,"nodeType":"164","messageId":"165","endLine":36,"endColumn":33},{"ruleId":"162","severity":1,"message":"177","line":42,"column":31,"nodeType":"164","messageId":"165","endLine":42,"endColumn":33},{"ruleId":"162","severity":1,"message":"177","line":47,"column":31,"nodeType":"164","messageId":"165","endLine":47,"endColumn":33},{"ruleId":"156","severity":1,"message":"179","line":1,"column":17,"nodeType":"161","messageId":"159","endLine":1,"endColumn":26},{"ruleId":"156","severity":1,"message":"180","line":1,"column":28,"nodeType":"161","messageId":"159","endLine":1,"endColumn":36},{"ruleId":"156","severity":1,"message":"171","line":3,"column":10,"nodeType":"161","messageId":"159","endLine":3,"endColumn":22},{"ruleId":"156","severity":1,"message":"181","line":4,"column":8,"nodeType":"161","messageId":"159","endLine":4,"endColumn":12},{"ruleId":"168","severity":1,"message":"182","line":66,"column":7,"nodeType":"170","endLine":66,"endColumn":35},{"ruleId":"156","severity":1,"message":"183","line":3,"column":24,"nodeType":"161","messageId":"159","endLine":3,"endColumn":29},{"ruleId":"156","severity":1,"message":"184","line":4,"column":66,"nodeType":"161","messageId":"159","endLine":4,"endColumn":85},"no-native-reassign",["185"],"no-negated-in-lhs",["186"],"no-unused-vars","'i18n' is defined but never used.","Program","unusedVar","'NotFound' is defined but never used.","Identifier","eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected","'Footer' is assigned a value but never used.","'Button' is defined but never used.","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","'PlusOutlined' is defined but never used.","'FormButtonModal' is defined but never used.","'NOT_FOUND_STATUS' is defined but never used.","Parsing error: Missing catch or finally clause\n\n\u001b[0m \u001b[90m 597 | \u001b[39m    }\u001b[0m\n\u001b[0m \u001b[90m 598 | \u001b[39m\u001b[0m\n\u001b[0m\u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 599 | \u001b[39m    \u001b[36mtry\u001b[39m {\u001b[0m\n\u001b[0m \u001b[90m     | \u001b[39m    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\u001b[0m\n\u001b[0m \u001b[90m 600 | \u001b[39m      postCommentForHive(hive_id)\u001b[0m\n\u001b[0m \u001b[90m 601 | \u001b[39m    }\u001b[0m\n\u001b[0m \u001b[90m 602 | \u001b[39m  }\u001b[0m","'dealWithError' is defined but never used.","'notificate' is defined but never used.","Expected '===' and instead saw '=='.","'createSwarm' is defined but never used.","'Component' is defined but never used.","'useState' is defined but never used.","'Base' is defined but never used.","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","'Space' is defined but never used.","'CloseCircleOutlined' is defined but never used.","no-global-assign","no-unsafe-negation"]